<!DOCTYPE html>
<html lang="en">
<head>
<title>Rune Transcriber</title>
<meta charset="utf-8">
<link rel="stylesheet" href="css/style.css">

<script src="js/util/Logger.js"></script>
<script src="js/util/HtmlUtilities.js"></script>

<script src="js/AngloSaxonRune.js"></script>
<script src="js/AngloSaxonRuneFormat.js"></script>
<script src="js/CerthRune.js"></script>
<script src="js/CerthRuneFormat.js"></script>
<script src="js/EnglishAngloSaxonTranscriber.js"></script>
<script src="js/EnglishCirthEreborTranscriber.js"></script>
<script src="js/EnglishTengwarTranscriber.js"></script>
<script src="js/TengwaRune.js"></script>
<script src="js/TengwaRuneFormat.js"></script>

<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js">
</script>
<![endif]-->
</head>
<body>
	<table>
		<tr>
			<td><textarea id="inputArea" rows="4" cols="60">the lord of the rings</textarea>
			</td>
		</tr>
		<tr>
			<td id="buttonBar">
				<table id="buttonTable">
					<tr>
						<td><input name="outputRune" type="radio"
							onclick="setAngloSaxon()">Anglo Saxon</input></td>
						<td><input name="outputRune" type="radio"
							onclick="setCirth()">Cirth</input></td>
						<td><input checked name="outputRune" type="radio"
							onclick="setTengwar()">Tengwar</input></td>
						<td>
							<button id="transcribeButton"
								onclick="transcribeActionPerformed()">Transcribe</button>
						</td>
					</tr>
				</table>
		</td>
		</tr>
		<tr>
			<td><textarea id="outputArea" rows="4" cols="60"
					class="font-tengwar"></textarea></td>
		</tr>
	</table>
	<script>
        "use strict";
        var LOGGER = new Logger();
        LOGGER.setTraceEnabled(false);
        //        LOGGER.setDebugEnabled(false);

        var easTranscriber = new EnglishAngloSaxonTranscriber();
        var eceTranscriber = new EnglishCirthEreborTranscriber();
        var etTranscriber = new EnglishTengwarTranscriber();
        var transcriber = etTranscriber;

        function transcribeActionPerformed()
        {
            var inputArea = document.getElementById("inputArea");
            var fromSequence = inputArea.value;
            LOGGER.debug("fromSequence = " + fromSequence);
            var toSequence = transcriber.transcribeForward(fromSequence);
            LOGGER.debug("toSequence = " + toSequence);
            var formatter = transcriber.getFormatter();
            var fontLetters = formatter.getFontLetters(toSequence);
            LOGGER.debug("fontLetters = " + fontLetters);
            var outputArea = document.getElementById("outputArea");
            outputArea.value = fontLetters;
        }

        function setAngloSaxon()
        {
            transcriber = easTranscriber;
            var outputArea = document.getElementById("outputArea");
            outputArea.value = "";
            HtmlUtilities.removeClass(outputArea, "font-tengwar");
            HtmlUtilities.removeClass(outputArea, "font-cirth");
            HtmlUtilities.addClass(outputArea, "font-anglo-saxon");
            transcribeActionPerformed();
        }

        function setCirth()
        {
            transcriber = eceTranscriber;
            var outputArea = document.getElementById("outputArea");
            outputArea.value = "";
            HtmlUtilities.removeClass(outputArea, "font-anglo-saxon");
            HtmlUtilities.removeClass(outputArea, "font-tengwar");
            HtmlUtilities.addClass(outputArea, "font-cirth");
            transcribeActionPerformed();
        }

        function setTengwar()
        {
            transcriber = etTranscriber;
            var outputArea = document.getElementById("outputArea");
            outputArea.value = "";
            HtmlUtilities.removeClass(outputArea, "font-anglo-saxon");
            HtmlUtilities.removeClass(outputArea, "font-cirth");
            HtmlUtilities.addClass(outputArea, "font-tengwar");
            transcribeActionPerformed();
        }

        setTengwar();
    </script>
</body>
</html>
