<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>EnglishTengwarTranscriber2Test</title>

<link rel="stylesheet"
	href="http://code.jquery.com/qunit/qunit-1.15.0.css">
<script src="http://code.jquery.com/qunit/qunit-1.15.0.js"></script>

<script src="../../main/js/util/Logger.js"></script>

<script src="../../main/js/EnglishTengwarTranscriber2.js"></script>
<script src="../../main/js/TengwaRune.js"></script>
<script src="../../main/js/TengwaRuneFormat.js"></script>

<script src="../../main/js/example/TengwarExampleTLOTR2.js"></script>

<script src="../../main/js/example/TengwarExampleTS1.js"></script>
<script src="../../main/js/example/TengwarExampleTS2.js"></script>

<script src="../../main/js/example/TengwarExampleUTONAME1.js"></script>
<script src="../../main/js/example/TengwarExampleUTONAME2.js"></script>

<script src="../../main/js/example/TengwarExampleTROTS1.js"></script>
<script src="../../main/js/example/TengwarExampleTROTS2.js"></script>

<script src="../../main/js/example/TengwarExampleTTOI1.js"></script>
<script src="../../main/js/example/TengwarExampleTTOI2.js"></script>

<script src="../../main/js/example/TengwarExampleTWOTR1.js"></script>
<script src="../../main/js/example/TengwarExampleTWOTR2.js"></script>

<script src="../../main/js/example/TengwarExampleSD1.js"></script>
<script src="../../main/js/example/TengwarExampleSD2.js"></script>

<script>
    var LOGGER = new Logger();

    /**************************************************************************
     * languageStringToWords()
     */

    QUnit.test("Example TLOTR2 languageStringToWords()", function(assert)
    {
        testLanguageStringToWords(assert, TengwarExampleTLOTR2.LANGUAGE_STRING
                .toLowerCase(), TengwarExampleTLOTR2.LANGUAGE_WORDS);
    });

    QUnit.test("Example TS1 languageStringToWords()", function(assert)
    {
        // Replace "of", " ", "the" with "of the"
        var expected = TengwarExampleTS1.LANGUAGE_WORDS.slice(0, 5).concat(
                TengwarExampleTS1.LANGUAGE_WORDS.slice(7));
        expected[4] = "of the";

        testLanguageStringToWords(assert, TengwarExampleTS1.LANGUAGE_STRING
                .toLowerCase(), expected);
    });

    QUnit.test("Example TS2 languageStringToWords()", function(assert)
    {
        testLanguageStringToWords(assert, TengwarExampleTS2.LANGUAGE_STRING
                .toLowerCase(), TengwarExampleTS2.LANGUAGE_WORDS);
    });

    QUnit.test("Example UTONAME1 languageStringToWords()", function(assert)
    {
        testLanguageStringToWords(assert,
                TengwarExampleUTONAME1.LANGUAGE_STRING.toLowerCase(),
                TengwarExampleUTONAME1.LANGUAGE_WORDS);
    });

    QUnit.test("Example UTONAME2 languageStringToWords()", function(assert)
    {
        testLanguageStringToWords(assert,
                TengwarExampleUTONAME2.LANGUAGE_STRING.toLowerCase(),
                TengwarExampleUTONAME2.LANGUAGE_WORDS);
    });

    QUnit.test("Example TROTS1 languageStringToWords()", function(assert)
    {
        testLanguageStringToWords(assert, TengwarExampleTROTS1.LANGUAGE_STRING
                .toLowerCase(), TengwarExampleTROTS1.LANGUAGE_WORDS);
    });

    QUnit.test("Example TROTS2 languageStringToWords()", function(assert)
    {
        testLanguageStringToWords(assert, TengwarExampleTROTS2.LANGUAGE_STRING
                .toLowerCase(), TengwarExampleTROTS2.LANGUAGE_WORDS);
    });

    QUnit.test("Example TTOI1 languageStringToWords()", function(assert)
    {
        testLanguageStringToWords(assert, TengwarExampleTTOI1.LANGUAGE_STRING
                .toLowerCase(), TengwarExampleTTOI1.LANGUAGE_WORDS);
    });

    QUnit.test("Example TTOI2 languageStringToWords()", function(assert)
    {
        testLanguageStringToWords(assert, TengwarExampleTTOI2.LANGUAGE_STRING
                .toLowerCase(), TengwarExampleTTOI2.LANGUAGE_WORDS);
    });

    QUnit.test("Example TWOTR1 languageStringToWords()", function(assert)
    {
        testLanguageStringToWords(assert, TengwarExampleTWOTR1.LANGUAGE_STRING
                .toLowerCase(), TengwarExampleTWOTR1.LANGUAGE_WORDS);
    });

    QUnit.test("Example TWOTR2 languageStringToWords()", function(assert)
    {
        testLanguageStringToWords(assert, TengwarExampleTWOTR2.LANGUAGE_STRING
                .toLowerCase(), TengwarExampleTWOTR2.LANGUAGE_WORDS);
    });

    QUnit.test("Example SD1 languageStringToWords()", function(assert)
    {
        testLanguageStringToWords(assert, TengwarExampleSD1.LANGUAGE_STRING
                .toLowerCase(), TengwarExampleSD1.LANGUAGE_WORDS);
    });

    QUnit.test("Example SD2 languageStringToWords()", function(assert)
    {
        testLanguageStringToWords(assert, TengwarExampleSD2.LANGUAGE_STRING
                .toLowerCase(), TengwarExampleSD2.LANGUAGE_WORDS);
    });

    /**************************************************************************
     * languageWordsToString()
     */

    QUnit.test("Example TLOTR2 languageWordsToString()", function(assert)
    {
        testLanguageWordsToString(assert, TengwarExampleTLOTR2.LANGUAGE_WORDS,
                TengwarExampleTLOTR2.LANGUAGE_STRING.toLowerCase());
    });

    QUnit.test("Example TS1 languageWordsToString()", function(assert)
    {
        testLanguageWordsToString(assert, TengwarExampleTS1.LANGUAGE_WORDS,
                TengwarExampleTS1.LANGUAGE_STRING.toLowerCase());
    });

    QUnit.test("Example TS2 languageWordsToString()", function(assert)
    {
        testLanguageWordsToString(assert, TengwarExampleTS2.LANGUAGE_WORDS,
                TengwarExampleTS2.LANGUAGE_STRING.toLowerCase());
    });

    QUnit.test("Example UTONAME1 languageWordsToString()", function(assert)
    {
        testLanguageWordsToString(assert,
                TengwarExampleUTONAME1.LANGUAGE_WORDS,
                TengwarExampleUTONAME1.LANGUAGE_STRING.toLowerCase());
    });

    QUnit.test("Example UTONAME2 languageWordsToString()", function(assert)
    {
        testLanguageWordsToString(assert,
                TengwarExampleUTONAME2.LANGUAGE_WORDS,
                TengwarExampleUTONAME2.LANGUAGE_STRING.toLowerCase());
    });

    QUnit.test("Example TROTS1 languageWordsToString()", function(assert)
    {
        testLanguageWordsToString(assert, TengwarExampleTROTS1.LANGUAGE_WORDS,
                TengwarExampleTROTS1.LANGUAGE_STRING.toLowerCase());
    });

    QUnit.test("Example TROTS2 languageWordsToString()", function(assert)
    {
        testLanguageWordsToString(assert, TengwarExampleTROTS2.LANGUAGE_WORDS,
                TengwarExampleTROTS2.LANGUAGE_STRING.toLowerCase());
    });

    QUnit.test("Example TTOI1 languageWordsToString()", function(assert)
    {
        testLanguageWordsToString(assert, TengwarExampleTTOI1.LANGUAGE_WORDS,
                TengwarExampleTTOI1.LANGUAGE_STRING.toLowerCase());
    });

    QUnit.test("Example TTOI2 languageWordsToString()", function(assert)
    {
        testLanguageWordsToString(assert, TengwarExampleTTOI2.LANGUAGE_WORDS,
                TengwarExampleTTOI2.LANGUAGE_STRING.toLowerCase());
    });

    QUnit.test("Example TWOTR1 languageWordsToString()", function(assert)
    {
        testLanguageWordsToString(assert, TengwarExampleTWOTR1.LANGUAGE_WORDS,
                TengwarExampleTWOTR1.LANGUAGE_STRING.toLowerCase());
    });

    QUnit.test("Example TWOTR2 languageWordsToString()", function(assert)
    {
        testLanguageWordsToString(assert, TengwarExampleTWOTR2.LANGUAGE_WORDS,
                TengwarExampleTWOTR2.LANGUAGE_STRING.toLowerCase());
    });

    QUnit.test("Example SD1 languageWordsToString()", function(assert)
    {
        testLanguageWordsToString(assert, TengwarExampleSD1.LANGUAGE_WORDS,
                TengwarExampleSD1.LANGUAGE_STRING.toLowerCase());
    });

    QUnit.test("Example SD2 languageWordsToString()", function(assert)
    {
        testLanguageWordsToString(assert, TengwarExampleSD2.LANGUAGE_WORDS,
                TengwarExampleSD2.LANGUAGE_STRING.toLowerCase());
    });

    /**************************************************************************
     * runesToFontLetters()
     */

    QUnit.test("runesToFontLetters()", function(assert)
    {
        // Setup.
        var transcriber = new EnglishTengwarTranscriber2();
        var runes = [ [ TengwaRune.ROMEN, TengwaRune.UNDER_DOT ],
                [ TengwaRune.RIGHT_CURL, TengwaRune.ORE ] ];

        // Run.
        var result = transcriber.runesToFontLetters(runes);

        // Verify.
        var expected = [ [ "7", "&#201;" ], [ "6", "&#225;" ] ];
        verify(assert, result, expected);
    });

    QUnit.test("runesToFontLetters() vowel + short carrier", function(assert)
    {
        // Setup.
        var transcriber = new EnglishTengwarTranscriber2();
        var runes = [ [ TengwaRune.THREE_DOTS, TengwaRune.SHORT_CARRIER ], // a
        [ TengwaRune.DOT, TengwaRune.SHORT_CARRIER ], // e
        [ TengwaRune.ACUTE, TengwaRune.SHORT_CARRIER ], // i
        [ TengwaRune.LEFT_CURL, TengwaRune.SHORT_CARRIER ], // o
        [ TengwaRune.RIGHT_CURL, TengwaRune.SHORT_CARRIER ], // u
        ];

        // Run.
        var result = transcriber.runesToFontLetters(runes);

        // Verify.
        var expected = [ [ "`", "D" ], [ "`", "T" ], [ "`", "R" ],
                [ "`", "Y" ], [ "`", "&#225;" ], ];
        verify(assert, result, expected);
    });

    QUnit.test("Example TLOTR2 runesToFontLetters()", function(assert)
    {
        testRunesToFontLetters(assert, TengwarExampleTLOTR2.RUNES,
                TengwarExampleTLOTR2.FONT_LETTERS);
    });

    QUnit.test("Example TS1 runesToFontLetters()", function(assert)
    {
        testRunesToFontLetters(assert, TengwarExampleTS1.RUNES,
                TengwarExampleTS1.FONT_LETTERS);
    });

    QUnit.test("Example TS2 runesToFontLetters()", function(assert)
    {
        testRunesToFontLetters(assert, TengwarExampleTS2.RUNES,
                TengwarExampleTS2.FONT_LETTERS);
    });

    QUnit.test("Example UTONAME1 runesToFontLetters()", function(assert)
    {
        testRunesToFontLetters(assert, TengwarExampleUTONAME1.RUNES,
                TengwarExampleUTONAME1.FONT_LETTERS);
    });

    QUnit.test("Example UTONAME2 runesToFontLetters()", function(assert)
    {
        testRunesToFontLetters(assert, TengwarExampleUTONAME2.RUNES,
                TengwarExampleUTONAME2.FONT_LETTERS);
    });

    QUnit.test("Example TROTS1 runesToFontLetters()", function(assert)
    {
        testRunesToFontLetters(assert, TengwarExampleTROTS1.RUNES,
                TengwarExampleTROTS1.FONT_LETTERS);
    });

    QUnit.test("Example TROTS2 runesToFontLetters()", function(assert)
    {
        testRunesToFontLetters(assert, TengwarExampleTROTS2.RUNES,
                TengwarExampleTROTS2.FONT_LETTERS);
    });

    QUnit.test("Example TTOI1 runesToFontLetters()", function(assert)
    {
        testRunesToFontLetters(assert, TengwarExampleTTOI1.RUNES,
                TengwarExampleTTOI1.FONT_LETTERS);
    });

    QUnit.test("Example TTOI2 runesToFontLetters()", function(assert)
    {
        testRunesToFontLetters(assert, TengwarExampleTTOI2.RUNES,
                TengwarExampleTTOI2.FONT_LETTERS);
    });

    QUnit.test("Example TWOTR1 runesToFontLetters()", function(assert)
    {
        testRunesToFontLetters(assert, TengwarExampleTWOTR1.RUNES,
                TengwarExampleTWOTR1.FONT_LETTERS);
    });

    QUnit.test("Example TWOTR2 runesToFontLetters()", function(assert)
    {
        testRunesToFontLetters(assert, TengwarExampleTWOTR2.RUNES,
                TengwarExampleTWOTR2.FONT_LETTERS);
    });

    QUnit.test("Example SD1 runesToFontLetters()", function(assert)
    {
        testRunesToFontLetters(assert, TengwarExampleSD1.RUNES,
                TengwarExampleSD1.FONT_LETTERS);
    });

    QUnit.test("Example SD2 runesToFontLetters()", function(assert)
    {
        testRunesToFontLetters(assert, TengwarExampleSD2.RUNES,
                TengwarExampleSD2.FONT_LETTERS);
    });

    /**************************************************************************
     * runesToPhonemes()
     */

    QUnit.test("runesToPhonemes() vowel + short carrier", function(assert)
    {
        // Setup.
        var transcriber = new EnglishTengwarTranscriber2();
        var runes = [ [ TengwaRune.THREE_DOTS, TengwaRune.SHORT_CARRIER ], // a
        [ TengwaRune.DOT, TengwaRune.SHORT_CARRIER ], // e
        [ TengwaRune.ACUTE, TengwaRune.SHORT_CARRIER ], // i
        [ TengwaRune.LEFT_CURL, TengwaRune.SHORT_CARRIER ], // o
        [ TengwaRune.RIGHT_CURL, TengwaRune.SHORT_CARRIER ], // u
        ];

        // Run.
        var result = transcriber.runesToPhonemes(runes);

        // Verify.
        var expected = [ [ "a" ], [ "e" ], [ "i" ], [ "o" ], [ "u" ], ];
        verify(assert, result, expected);
    });

    QUnit.test("runesToPhonemes() vowel + short carrier + vowel", function(
            assert)
    {
        // Setup.
        var transcriber = new EnglishTengwarTranscriber2();
        var runes = [
                [ TengwaRune.DOT, TengwaRune.SHORT_CARRIER,
                        TengwaRune.THREE_UNDER_DOTS ], // ea
                [ TengwaRune.ACUTE, TengwaRune.SHORT_CARRIER,
                        TengwaRune.THREE_UNDER_DOTS ], // ia
                [ TengwaRune.ACUTE, TengwaRune.SHORT_CARRIER,
                        TengwaRune.UNDER_DOT ], // ie
                [ TengwaRune.RIGHT_CURL, TengwaRune.SHORT_CARRIER,
                        TengwaRune.UNDER_DOT ], // ue
        ];

        // Run.
        var result = transcriber.runesToPhonemes(runes);

        // Verify.
        var expected = [ [ "e", "a" ], [ "i", "a" ], [ "i", "e" ],
                [ "u", "e" ], ];
        verify(assert, result, expected);
    });

    QUnit.test("Example TLOTR2 runesToPhonemes()", function(assert)
    {
        testRunesToPhonemes(assert, TengwarExampleTLOTR2.RUNES,
                TengwarExampleTLOTR2.PHONEMES);
    });

    QUnit.test("Example TS1 runesToPhonemes()", function(assert)
    {
        testRunesToPhonemes(assert, TengwarExampleTS1.RUNES,
                TengwarExampleTS1.PHONEMES);
    });

    QUnit.test("Example TS2 runesToPhonemes()", function(assert)
    {
        testRunesToPhonemes(assert, TengwarExampleTS2.RUNES,
                TengwarExampleTS2.PHONEMES);
    });

    QUnit.test("Example UTONAME1 runesToPhonemes()", function(assert)
    {
        testRunesToPhonemes(assert, TengwarExampleUTONAME1.RUNES,
                TengwarExampleUTONAME1.PHONEMES);
    });

    QUnit.test("Example UTONAME2 runesToPhonemes()", function(assert)
    {
        testRunesToPhonemes(assert, TengwarExampleUTONAME2.RUNES,
                TengwarExampleUTONAME2.PHONEMES);
    });

    QUnit.test("Example TROTS1 runesToPhonemes()", function(assert)
    {
        testRunesToPhonemes(assert, TengwarExampleTROTS1.RUNES,
                TengwarExampleTROTS1.PHONEMES);
    });

    QUnit.test("Example TROTS2 runesToPhonemes()", function(assert)
    {
        testRunesToPhonemes(assert, TengwarExampleTROTS2.RUNES,
                TengwarExampleTROTS2.PHONEMES);
    });

    QUnit.test("Example TTOI1 runesToPhonemes()", function(assert)
    {
        testRunesToPhonemes(assert, TengwarExampleTTOI1.RUNES,
                TengwarExampleTTOI1.PHONEMES);
    });

    QUnit.test("Example TTOI2 runesToPhonemes()", function(assert)
    {
        testRunesToPhonemes(assert, TengwarExampleTTOI2.RUNES,
                TengwarExampleTTOI2.PHONEMES);
    });

    QUnit.test("Example TWOTR1 runesToPhonemes()", function(assert)
    {
        testRunesToPhonemes(assert, TengwarExampleTWOTR1.RUNES,
                TengwarExampleTWOTR1.PHONEMES);
    });

    QUnit.test("Example TWOTR2 runesToPhonemes()", function(assert)
    {
        testRunesToPhonemes(assert, TengwarExampleTWOTR2.RUNES,
                TengwarExampleTWOTR2.PHONEMES);
    });

    QUnit.test("Example SD1 runesToPhonemes()", function(assert)
    {
        testRunesToPhonemes(assert, TengwarExampleSD1.RUNES,
                TengwarExampleSD1.PHONEMES);
    });

    QUnit.test("Example SD2 runesToPhonemes()", function(assert)
    {
        testRunesToPhonemes(assert, TengwarExampleSD2.RUNES,
                TengwarExampleSD2.PHONEMES);
    });

    /**************************************************************************
     * phonemesToLanguageWords()
     */

    QUnit.test("Example TLOTR2 phonemesToLanguageWords()", function(assert)
    {
        testPhonemesToLanguageWords(assert, TengwarExampleTLOTR2.PHONEMES,
                TengwarExampleTLOTR2.LANGUAGE_WORDS);
    });

    QUnit.test("Example TS1 phonemesToLanguageWords()", function(assert)
    {
        testPhonemesToLanguageWords(assert, TengwarExampleTS1.PHONEMES,
                TengwarExampleTS1.LANGUAGE_WORDS);
    });

    QUnit.test("Example TS2 phonemesToLanguageWords()", function(assert)
    {
        testPhonemesToLanguageWords(assert, TengwarExampleTS2.PHONEMES,
                TengwarExampleTS2.LANGUAGE_WORDS);
    });

    QUnit.test("Example UTONAME1 phonemesToLanguageWords()", function(assert)
    {
        testPhonemesToLanguageWords(assert, TengwarExampleUTONAME1.PHONEMES,
                TengwarExampleUTONAME1.LANGUAGE_WORDS);
    });

    QUnit.test("Example UTONAME2 phonemesToLanguageWords()", function(assert)
    {
        testPhonemesToLanguageWords(assert, TengwarExampleUTONAME2.PHONEMES,
                TengwarExampleUTONAME2.LANGUAGE_WORDS);
    });

    QUnit.test("Example TROTS1 phonemesToLanguageWords()", function(assert)
    {
        testPhonemesToLanguageWords(assert, TengwarExampleTROTS1.PHONEMES,
                TengwarExampleTROTS1.LANGUAGE_WORDS);
    });

    QUnit.test("Example TROTS2 phonemesToLanguageWords()", function(assert)
    {
        testPhonemesToLanguageWords(assert, TengwarExampleTROTS2.PHONEMES,
                TengwarExampleTROTS2.LANGUAGE_WORDS);
    });

    QUnit.test("Example TTOI1 phonemesToLanguageWords()", function(assert)
    {
        testPhonemesToLanguageWords(assert, TengwarExampleTTOI1.PHONEMES,
                TengwarExampleTTOI1.LANGUAGE_WORDS);
    });

    QUnit.test("Example TTOI2 phonemesToLanguageWords()", function(assert)
    {
        testPhonemesToLanguageWords(assert, TengwarExampleTTOI2.PHONEMES,
                TengwarExampleTTOI2.LANGUAGE_WORDS);
    });

    QUnit.test("Example TWOTR1 phonemesToLanguageWords()", function(assert)
    {
        testPhonemesToLanguageWords(assert, TengwarExampleTWOTR1.PHONEMES,
                TengwarExampleTWOTR1.LANGUAGE_WORDS);
    });

    QUnit.test("Example TWOTR2 phonemesToLanguageWords()", function(assert)
    {
        testPhonemesToLanguageWords(assert, TengwarExampleTWOTR2.PHONEMES,
                TengwarExampleTWOTR2.LANGUAGE_WORDS);
    });

    QUnit.test("Example SD1 phonemesToLanguageWords()", function(assert)
    {
        testPhonemesToLanguageWords(assert, TengwarExampleSD1.PHONEMES,
                TengwarExampleSD1.LANGUAGE_WORDS);
    });

    QUnit.test("Example SD2 phonemesToLanguageWords()", function(assert)
    {
        testPhonemesToLanguageWords(assert, TengwarExampleSD2.PHONEMES,
                TengwarExampleSD2.LANGUAGE_WORDS);
    });

    /**************************************************************************
     * Utility functions.
     */

    function createTranscriber()
    {
        return new EnglishTengwarTranscriber2();
    }

    function testLanguageStringToWords(assert, string, expected, useComparison)
    {
        // Setup.
        var transcriber = createTranscriber();

        // Run.
        var result = transcriber.languageStringToWords(string);

        // Verify.
        verify(assert, result, expected, useComparison);
    }

    function testLanguageWordsToString(assert, words, expected)
    {
        // Setup.
        var transcriber = createTranscriber();

        // Run.
        var result = transcriber.languageWordsToString(words);

        // Verify.
        assert.ok(result);
        assert.equal(result.length, expected.length);
        assert.equal(result, expected);
    }

    function testRunesToFontLetters(assert, runes, expected)
    {
        // Setup.
        var transcriber = createTranscriber();

        // Run.
        var result = transcriber.runesToFontLetters(runes);

        // Verify.
        verify(assert, result, expected);
    }

    function testRunesToPhonemes(assert, runes, expected)
    {
        // Setup.
        var transcriber = createTranscriber();

        // Run.
        var result = transcriber.runesToPhonemes(runes);

        // Verify.
        verify(assert, result, expected);
    }

    function testPhonemesToLanguageWords(assert, phonemes, expected)
    {
        // Setup.
        var transcriber = createTranscriber();

        // Run.
        var result = transcriber.phonemesToLanguageWords(phonemes);

        // Verify.
        verify(assert, result, expected);
    }

    function verify(assert, result, expected, useComparison)
    {
        assert.ok(result);
        assert.equal(result.length, expected.length);

        if (useComparison)
        {
            assert.equal(result, expected);
        }

        for (var i = 0; i < expected.length; i++)
        {
            if (Array.isArray(expected[i]))
            {
                assert.equal(result[i].length, expected[i].length);

                for (var j = 0; j < expected[i].length; j++)
                {
                    assert.equal(result[i][j], expected[i][j]);
                }
            }
            else
            {
                assert.equal(result[i], expected[i]);
            }
        }
    }
</script>
</head>
<body>
	<div id="qunit"></div>
</body>
</html>
